{"version":3,"sources":["../../dist/index.es.js","mapStyles.js","App.js","index.js"],"names":["MoveFunctions","_assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","getMapViewport","map","_a","getCenter","toArray","latitude","longitude","zoom","getZoom","bearing","getBearing","pitch","getPitch","setMapViewport","viewport","options","center","LngLat","moveFn","jumpTo","moveOptions","speed","curve","easing","flyTo","easeTo","getMoveParams","mapNodeRef","initialViewport","style","onViewportChanged","onLoaded","mapboxAccessToken","mapRef","current","mapOptions","container","token","getMapOptions","Map","viewportChanged_1","target","on","remove","setStyle","setViewport","currentViewport","STYLES","OSM","version","sources","osm","type","tiles","tileSize","layers","id","source","OTP","otp","INITIAL_VIEWPORT","App","React","useState","mapDivRef","useRef","useMapboxGl","v","console","log","Fragment","name","value","onChange","e","onClick","className","ref","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.6774c9ec.chunk.js","sourcesContent":["import { useRef, useEffect, useCallback } from 'react';\nimport mapboxgl from 'mapbox-gl';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\nvar _assign = function __assign() {\n  _assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return _assign.apply(this, arguments);\n};\n\nfunction buildCenter(longitude, latitude) {\n  return new mapboxgl.LngLat(latitude, longitude);\n}\n\nfunction getMapViewport(map) {\n  var _a = map.getCenter().toArray(),\n      latitude = _a[0],\n      longitude = _a[1];\n\n  var zoom = map.getZoom();\n  var bearing = map.getBearing();\n  var pitch = map.getPitch();\n  return {\n    longitude: longitude,\n    latitude: latitude,\n    zoom: zoom,\n    bearing: bearing,\n    pitch: pitch\n  };\n}\n\nvar MoveFunctions;\n\n(function (MoveFunctions) {\n  MoveFunctions[\"jumpTo\"] = \"jumpTo\";\n  MoveFunctions[\"easeTo\"] = \"easeTo\";\n  MoveFunctions[\"flyTo\"] = \"flyTo\";\n})(MoveFunctions || (MoveFunctions = {}));\n\nfunction getMoveParams(options) {\n  var moveFn = MoveFunctions.jumpTo;\n  var moveOptions = {};\n\n  if (options) {\n    var speed = options.speed,\n        curve = options.curve,\n        easing = options.easing;\n\n    if (speed && curve && easing) {\n      moveFn = MoveFunctions.flyTo;\n      moveOptions = options;\n    } else if (speed && easing) {\n      moveFn = MoveFunctions.easeTo;\n      moveOptions = {\n        speed: speed,\n        easing: easing\n      };\n    }\n  }\n\n  return [moveFn, moveOptions];\n}\n\nfunction setMapViewport(map, viewport, options) {\n  var center = buildCenter(viewport.longitude, viewport.latitude);\n\n  var _a = getMoveParams(options),\n      moveFn = _a[0],\n      moveOptions = _a[1];\n\n  map[moveFn](_assign({\n    center: center,\n    zoom: viewport.zoom\n  }, moveOptions));\n}\n\nfunction getMapOptions(container, viewport, token) {\n  var center;\n  center = [viewport.latitude, viewport.longitude];\n  var mapOptions = {\n    container: container,\n    center: center,\n    zoom: viewport.zoom,\n    bearing: viewport.bearing,\n    pitch: viewport.pitch\n  };\n  if (token) mapOptions[\"accessToken\"] = token;\n  return mapOptions;\n}\n\nfunction useMapboxGl(_a) {\n  var mapNodeRef = _a.mapNodeRef,\n      initialViewport = _a.initialViewport,\n      style = _a.style,\n      onViewportChanged = _a.onViewportChanged,\n      onLoaded = _a.onLoaded,\n      mapboxAccessToken = _a.mapboxAccessToken;\n  var mapRef = useRef(null);\n  useEffect(function () {\n    if (mapNodeRef.current) {\n      var mapOptions = getMapOptions(mapNodeRef.current, initialViewport, mapboxAccessToken);\n      mapRef.current = new mapboxgl.Map(mapOptions);\n\n      var viewportChanged_1 = function viewportChanged_1(_a) {\n        var map = _a.target;\n        var viewport = getMapViewport(map);\n        onViewportChanged && onViewportChanged(viewport);\n      };\n\n      var handleMapLoad = function handleMapLoad(_a) {\n        var map = _a.target;\n        viewportChanged_1({\n          target: map\n        });\n        if (onLoaded) onLoaded(map);\n      };\n\n      mapRef.current.on(\"moveend\", viewportChanged_1);\n      mapRef.current.on(\"load\", handleMapLoad);\n      return function () {\n        if (mapRef.current) mapRef.current.remove();\n      };\n    }\n  }, [mapNodeRef]);\n  useEffect(function () {\n    if (mapRef.current) if (style) mapRef.current.setStyle(style);\n  }, [mapRef, style]);\n  var setViewport = useCallback(function (viewport, options) {\n    if (mapRef.current) {\n      var currentViewport = getMapViewport(mapRef.current);\n      setMapViewport(mapRef.current, _assign(_assign({}, currentViewport), viewport), options);\n    }\n  }, [mapRef]);\n  return {\n    mapRef: mapRef,\n    setViewport: setViewport\n  };\n}\n\nexport default useMapboxGl;\nexport { getMapViewport };","export const STYLES = {\n  OSM: {\n    version: 8,\n    sources: {\n      osm: {\n        type: \"raster\",\n        tiles: [\n          \"https://a.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n          \"https://b.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n          \"https://c.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        ],\n        tileSize: 256\n      }\n    },\n    layers: [\n      {\n        id: \"osm\",\n        source: \"osm\",\n        type: \"raster\"\n      }\n    ]\n  },\n\n  OTP: {\n    version: 8,\n    sources: {\n      otp: {\n        type: \"raster\",\n        tiles: [\n          \"https://a.tile.opentopomap.org/{z}/{x}/{y}.png\",\n          \"https://b.tile.opentopomap.org/{z}/{x}/{y}.png\",\n          \"https://c.tile.opentopomap.org/{z}/{x}/{y}.png\"\n        ],\n        tileSize: 256\n      }\n    },\n    layers: [\n      {\n        id: \"otp\",\n        source: \"otp\",\n        type: \"raster\"\n      }\n    ]\n  }\n};\n","import React from \"react\";\n\nimport useMapboxGl from \"use-mapbox-gl\";\nimport { STYLES } from \"./mapStyles\";\n\nconst INITIAL_VIEWPORT = {\n  latitude: 44.634507629603483,\n  longitude: 48.818963526964204,\n  zoom: 10,\n  bearing: -0,\n  pitch: 0\n};\n\nconst App = () => {\n  const [style, setStyle] = React.useState(\"OSM\");\n  const mapDivRef = React.useRef();\n  const { setViewport } = useMapboxGl({\n    mapNodeRef: mapDivRef,\n    initialViewport: INITIAL_VIEWPORT,\n    style: STYLES[style],\n    onViewportChanged: v => console.log(\"viewport changed\", v),\n    onLoaded: () => console.log(\"map loaded\")\n  });\n  return (\n    <React.Fragment>\n      <p>\n        Select map style{\" \"}\n        <select\n          name=\"style\"\n          value={style}\n          onChange={e => setStyle(e.target.value)}\n        >\n          <option value=\"OSM\">open street maps</option>\n          <option value=\"OTP\">open topo map</option>\n        </select>{\" \"}\n        <button\n          onClick={() =>\n            setViewport(INITIAL_VIEWPORT, {\n              speed: 1,\n              curve: 1,\n              easing: t => t\n            })\n          }\n        >\n          reset vieport\n        </button>\n      </p>\n      <div className=\"map-container\">\n        <div id=\"map\" ref={mapDivRef}></div>\n      </div>\n    </React.Fragment>\n  );\n};\nexport default App;\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}