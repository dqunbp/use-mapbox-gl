(this["webpackJsonpuse-mapbox-gl-example"]=this["webpackJsonpuse-mapbox-gl-example"]||[]).push([[0],{11:function(e,t,n){},12:function(e,t,n){"use strict";n.r(t);var r,o,a=n(0),c=n.n(a),u=n(3),i=n.n(u),p=(n(11),n(2)),l=n(1),s=n.n(l),m=function(){return(m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function g(e){var t=e.getCenter().toArray(),n=t[0];return{longitude:t[1],latitude:n,zoom:e.getZoom(),bearing:e.getBearing(),pitch:e.getPitch()}}function f(e,t,n){var r,a,c=(r=t.longitude,a=t.latitude,new s.a.LngLat(a,r)),u=function(e){var t=o.jumpTo,n={};if(e){var r=e.speed,a=e.curve,c=e.easing;r&&a&&c?(t=o.flyTo,n=e):r&&c&&(t=o.easeTo,n={speed:r,easing:c})}return[t,n]}(n),i=u[0],p=u[1];e[i](m(m(m({},p),t),{center:c}))}!function(e){e.MOVEEND="moveend",e.MOVE="move"}(r||(r={})),function(e){e.jumpTo="jumpTo",e.easeTo="easeTo",e.flyTo="flyTo"}(o||(o={}));var d=function(e){var t=e.mapNodeRef,n=e.style,o=e.initialViewport,c=e.onViewportChanged,u=e.onLoaded,i=e.mapboxAccessToken,p=e.viewportUpdatingMode,l=void 0===p?r.MOVEEND:p,d=Object(a.useRef)(null),v=Object(a.useCallback)((function(e){var t=g(e.target);c&&c(t)}),[]);Object(a.useEffect)((function(){if(t.current){var e=function(e,t,n){var r={container:e,center:[t.latitude,t.longitude],zoom:t.zoom,bearing:t.bearing,pitch:t.pitch};return n&&(r.accessToken=n),r}(t.current,o,i);d.current=new s.a.Map(e);d.current.on("load",(function(e){var t=e.target;v({target:t}),u&&u(t)}))}return function(){d.current&&d.current.remove()}}),[t]),Object(a.useEffect)((function(){d.current&&n&&d.current.setStyle(n)}),[d,n]),Object(a.useEffect)((function(){return d.current&&d.current.on(function(e){if(!Object.values(r).includes(e))throw new Error("Bad value, viewport updating mode shoud be one of [move, moveend]");return e}(l),v),function(){d.current&&d.current.off(l,v)}}),[d,l]);var b=Object(a.useCallback)((function(){return d.current?d.current:null}),[d]),E=Object(a.useCallback)((function(e,t){if(d.current){var n=g(d.current);f(d.current,m(m({},n),e),t)}}),[d]);return{mapRef:d,setViewport:E,getMap:b}},v={OSM:{version:8,sources:{osm:{type:"raster",tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png","https://c.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"osm",source:"osm",type:"raster"}]},OTP:{version:8,sources:{otp:{type:"raster",tiles:["https://a.tile.opentopomap.org/{z}/{x}/{y}.png","https://b.tile.opentopomap.org/{z}/{x}/{y}.png","https://c.tile.opentopomap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"otp",source:"otp",type:"raster"}]}},b={latitude:44.63450762960348,longitude:48.818963526964204,zoom:10,bearing:-0,pitch:0},E=function(){var e=Object(a.useState)(r.MOVEEND),t=Object(p.a)(e,2),n=t[0],o=t[1],u=Object(a.useState)("OSM"),i=Object(p.a)(u,2),l=i[0],s=i[1],m=Object(a.useRef)(),g=d({mapNodeRef:m,initialViewport:b,style:v[l],onViewportChanged:function(e){return console.log("viewport changed",e)},onLoaded:function(){return console.log("map zoom",f().getZoom())},viewportUpdatingMode:n}),f=g.getMap,E=g.setViewport;return c.a.createElement("div",{className:"app"},c.a.createElement("div",{className:"options"},c.a.createElement("div",null,c.a.createElement("p",null,"Select map style"," ",c.a.createElement("select",{name:"style",value:l,onChange:function(e){return s(e.target.value)}},c.a.createElement("option",{value:"OSM"},"open street maps"),c.a.createElement("option",{value:"OTP"},"open topo map"))," ",c.a.createElement("button",{onClick:function(){return E(b,{speed:1,curve:1,easing:function(e){return e}})}},"reset vieport")),c.a.createElement("p",null,"Select viewport updating mode"," ",c.a.createElement("select",{name:"mode",value:n,onChange:function(e){return o(e.target.value)}},c.a.createElement("option",{value:r.MOVEEND},"MOVEEND"),c.a.createElement("option",{value:r.MOVE},"MOVE"))," ","(check the console)")),c.a.createElement("h1",null,c.a.createElement("a",{href:"https://github.com/dqunbp/use-mapbox-gl"},"use-mapbox-gl"))),c.a.createElement("div",{className:"map-container"},c.a.createElement("div",{id:"map",ref:m})))};i.a.render(c.a.createElement(E,null),document.getElementById("root"))},4:function(e,t,n){e.exports=n(12)}},[[4,1,2]]]);
//# sourceMappingURL=main.2c680fc3.chunk.js.map