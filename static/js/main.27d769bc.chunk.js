(this["webpackJsonpuse-mapbox-gl-example"]=this["webpackJsonpuse-mapbox-gl-example"]||[]).push([[0],{11:function(e,t,n){},12:function(e,t,n){"use strict";n.r(t);var o,r,a=n(0),c=n.n(a),i=n(3),u=n.n(i),l=(n(11),n(2)),p=n(1),s=n.n(p),m=function(){return(m=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function g(e){var t=e.getCenter().toArray(),n=t[0];return{longitude:t[1],latitude:n,zoom:e.getZoom(),bearing:e.getBearing(),pitch:e.getPitch()}}function d(e,t,n){var o,a,c=(o=t.longitude,a=t.latitude,new s.a.LngLat(a,o)),i=function(e){var t=r.jumpTo,n={};if(e){var o=e.speed,a=e.curve,c=e.easing;o&&a&&c?(t=r.flyTo,n=e):o&&c&&(t=r.easeTo,n={speed:o,easing:c})}return[t,n]}(n),u=i[0],l=i[1];e[u](m(m(m({},l),t),{center:c}))}!function(e){e.MOVEEND="moveend",e.MOVE="move"}(o||(o={})),function(e){e.jumpTo="jumpTo",e.easeTo="easeTo",e.flyTo="flyTo"}(r||(r={}));var f={latitude:0,longitude:0,zoom:0,bearing:-0,pitch:0};var v=function(e){var t=e.mapNodeRef,n=e.style,r=e.onViewportChanged,c=e.onLoaded,i=e.mapboxAccessToken,u=e.initialViewport,l=void 0===u?f:u,p=e.viewportUpdatingMode,v=void 0===p?o.MOVEEND:p,b=Object(a.useRef)(null),E=Object(a.useCallback)((function(e){var t=g(e.target);r&&r(t)}),[]);Object(a.useEffect)((function(){if(t.current){var e=function(e,t,n){var o=t.latitude,r=void 0===o?0:o,a=t.longitude,c=void 0===a?0:a,i=t.zoom,u=void 0===i?0:i,l=t.bearing,p=void 0===l?-0:l,s=t.pitch,m={container:e,center:[r,c],zoom:u,bearing:p,pitch:void 0===s?0:s};return n&&(m.accessToken=n),m}(t.current,l,i);b.current=new s.a.Map(e);b.current.on("load",(function(e){var t=e.target;E({target:t}),c&&c(t)}))}return function(){b.current&&b.current.remove()}}),[t]),Object(a.useEffect)((function(){b.current&&n&&b.current.setStyle(n)}),[b,n]),Object(a.useEffect)((function(){return b.current&&b.current.on(function(e){if(!Object.values(o).includes(e))throw new Error("Bad value, viewport updating mode shoud be one of [move, moveend]");return e}(v),E),function(){b.current&&b.current.off(v,E)}}),[b,v]);var h=Object(a.useCallback)((function(){return b.current?b.current:null}),[b]),O=Object(a.useCallback)((function(e,t){if(b.current){var n=g(b.current);d(b.current,m(m({},n),e),t)}}),[b]);return{mapRef:b,setViewport:O,getMap:h}},b={OSM:{version:8,sources:{osm:{type:"raster",tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png","https://c.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"osm",source:"osm",type:"raster"}]},OTP:{version:8,sources:{otp:{type:"raster",tiles:["https://a.tile.opentopomap.org/{z}/{x}/{y}.png","https://b.tile.opentopomap.org/{z}/{x}/{y}.png","https://c.tile.opentopomap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"otp",source:"otp",type:"raster"}]}},E={latitude:44.63450762960348,longitude:48.818963526964204,zoom:10},h=function(){var e=Object(a.useState)(o.MOVEEND),t=Object(l.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)("OSM"),u=Object(l.a)(i,2),p=u[0],s=u[1],m=Object(a.useRef)(),g=v({mapNodeRef:m,initialViewport:E,style:b[p],onViewportChanged:function(e){return console.log("viewport changed",e)},onLoaded:function(){return console.log("map zoom",d().getZoom())},viewportUpdatingMode:n}),d=g.getMap,f=g.setViewport;return c.a.createElement("div",{className:"app"},c.a.createElement("div",{className:"options"},c.a.createElement("div",null,c.a.createElement("p",null,"Select map style"," ",c.a.createElement("select",{name:"style",value:p,onChange:function(e){return s(e.target.value)}},c.a.createElement("option",{value:"OSM"},"open street maps"),c.a.createElement("option",{value:"OTP"},"open topo map"))," ",c.a.createElement("button",{onClick:function(){return f(E,{speed:1,curve:1,easing:function(e){return e}})}},"reset vieport")),c.a.createElement("p",null,"Select viewport updating mode"," ",c.a.createElement("select",{name:"mode",value:n,onChange:function(e){return r(e.target.value)}},c.a.createElement("option",{value:o.MOVEEND},"MOVEEND"),c.a.createElement("option",{value:o.MOVE},"MOVE"))," ","(check the console)")),c.a.createElement("h1",null,c.a.createElement("a",{href:"https://github.com/dqunbp/use-mapbox-gl"},"use-mapbox-gl"))),c.a.createElement("div",{className:"map-container"},c.a.createElement("div",{id:"map",ref:m})))};u.a.render(c.a.createElement(h,null),document.getElementById("root"))},4:function(e,t,n){e.exports=n(12)}},[[4,1,2]]]);
//# sourceMappingURL=main.27d769bc.chunk.js.map